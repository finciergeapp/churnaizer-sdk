<!DOCTYPE html>
<html>
<head>
  <title>Churnaizer Live SDK Test</title>
</head>
<body>
  <h1>🧪 Churnaizer SDK - Live Test</h1>

  <form id="userForm">
    <input name="user_id" placeholder="User ID" required><br>
    <input name="monthly_revenue" placeholder="Monthly Revenue" type="number" required><br>
    <input name="subscription_plan" placeholder="Plan (e.g., Pro)" required><br>
    <input name="number_of_logins_last30days" placeholder="Login Count (30 days)" type="number"><br>
    <input name="days_since_signup" placeholder="Days since signup" type="number"><br>
    <button type="submit">🔍 Run Prediction</button>
  </form>

  <h3 id="result">Waiting...</h3>

  <script src="https://churnaizer.com/churnaizer-sdk.js"></script>
  <script>
    document.getElementById("userForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;
      const userData = {
        user_id: form.user_id.value,
        monthly_revenue: parseFloat(form.monthly_revenue.value),
        subscription_plan: form.subscription_plan.value,
        number_of_logins_last30days: parseInt(form.number_of_logins_last30days.value || 0),
        days_since_signup: parseInt(form.days_since_signup.value || 0),
        active_features_used: 4,  // You can add more dynamic fields
        support_tickets_opened: 0,
        last_payment_status: "Success",
        email_opens_last30days: 10,
        last_login_days_ago: 2,
        billing_issue_count: 0
      };

      const apiKey = "YOUR_API_KEY_SHOULD_BE_HANDLED_FROM BACKEND"; // Do not expose in prod

      Churnaizer.track(userData, apiKey, function(result, error) {
        if (error) {
          return document.getElementById("result").innerText = "❌ Error: " + error.message;
        }

        document.getElementById("result").innerText =
          "✅ Churn Score: " + (result.churn_score * 100).toFixed(1) + "%" + "\n" +
          "📌 Reason: " + result.churn_reason + "\n" +
          "💡 Insight: " + result.insight;
      });
    });
  </script>
</body>
</html>
