<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Churnaizer SDK - Live Test</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 12px;
      background: #f9f9f9;
    }
    input, button {
      display: block;
      margin: 10px 0;
      width: 100%;
      padding: 10px;
      font-size: 16px;
    }
    pre {
      background: #000;
      color: #0f0;
      padding: 15px;
      margin-top: 20px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h2>ğŸ” Churnaizer SDK - Live Prediction Test</h2>
  <p>Test how the SDK tracks users and predicts churn using real AI:</p>

  <input id="user_id" placeholder="User ID" value="u123" />
  <input id="plan" placeholder="User Plan" value="free trial" />
  <input id="usage_score" type="number" placeholder="Usage Score (0-100)" value="45" />
  <input id="support_tickets" type="number" placeholder="Support Tickets" value="2" />
  <input id="email" type="email" placeholder="Email Address" value="founder@saas.com" />
  
  <button id="runPredictionBtn">ğŸ” Run Churn Prediction</button>

  <pre id="predictionResult">Results will appear here...</pre>

  <script src="churnaizer-sdk.js"></script>
  
  <script>
    const CHURN_API_KEY = "cg_demo_api_key_for_testing_only"; // Replace with test API key from Supabase

    document.getElementById("runPredictionBtn").addEventListener("click", function () {
      const userData = {
        user_id: document.getElementById("user_id").value,
        plan: document.getElementById("plan").value,
        usage_score: parseFloat(document.getElementById("usage_score").value),
        support_tickets: parseInt(document.getElementById("support_tickets").value),
        email: document.getElementById("email").value
      };

      window.Churnaizer.track(userData, CHURN_API_KEY, function (result, err) {
        const output = document.getElementById("predictionResult");

        if (err) {
          output.innerText = "âŒ Error: " + err.message;
        } else {
          output.innerText = `
âœ… Churn Score: ${result.churn_score}
ğŸ“‰ Reason: ${result.churn_reason}
ğŸ’¡ Insight: ${result.insight}
ğŸ§  Confidence Score: ${result.understanding}
          `;
        }
      });
    });
  </script>
</body>
</html>
